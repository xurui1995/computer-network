# 第三章 数据链路层 
### 定义    
> 数据链路层在物理层提供的服务的基础上向网络层提供服务，其最基本的服务是将源自网络层来的数据可靠地传输到相邻节点的目标机网络层  

### 数据链路层的信道类型  
* 点对点信道     
一对一的点对点通信方式  
* 广播信道  
一对多的广播通信方式，广播信道上连接的主机很多，因此使用专业的共享信道协议来协调这些主机的数据发送。   
#### 链路  
> 一条点到点的物理线路段，中间没有其他任何交换节点。   
#### 数据链路   
> 除了物理线路外。还必须有通信协议来控制这些数据的传输，把这些协议的硬件和软件加到链路上（一般通过网卡），构成数据链路。   
### 帧   
![此处输入图片的描述][1]
### 数据链路层解决的三个基本问题   
* 封装成帧与透明传输   
![此处输入图片的描述][2]
试问：
>帧还未发送完毕，发送端出了问题，只能重发该帧，接收端却收到了前面的“半截子帧”，它还会抛弃吗？为什么？ 会    
>若数据中出现和帧头帧尾结束标记一样的数据，如何告诉这不是开始或结束？    字节填充  发送端在数据中出现控制字段前面插入转义字符如ESC，接收端去掉该字符. 
 
* 差错检测   
传输差错：可分为两大类，一类就是最基本的比特差错，另一类就是收到的帧并没有出现比特错误，但却出现了帧丢失、帧重复或帧失序。  
数据链路层主要保证数据没有差错，不保证可靠传输，对差错数据直接丢弃   
使用循环冗余检验CRC检验实现无差错传输。  
### 点到点通信数据链路层协议PPP（广域网使用）     
> 使用最多的数据链路层协议 ，使用拨号电话线上网时，一般都是PPP协议           
![此处输入图片的描述][3] 
使用零比特填充法   
### 使用广播信道的数据链路层（局域网使用）   
* 共享通信媒体   
![此处输入图片的描述][4]
* CSMA/CD 载波监听多点接入/碰撞检测  
多点接入   
许多计算机以多点接入方式连在一根总线  
载波监听    
监听总线上有没有其他计算器在发送数据      
碰撞检测   
边发送数据边检测信道上电压的大小   

> 使用CSMA/CD协议的以太网不能全双工通信只能半双工通信   
争用期 2τ ，τ（两端往返时间）   
发生了冲突后进行避让，二进制指数类型退避算法，退避这个时间后再发送数据 

### 以太网
局域网，满足CSMA/CD  

* 以太网与数据链路层的两个子层   
    * 逻辑链路控制LLC子层
    * 媒体接入控制MAC子层   
* 以太网提供的服务是不可靠的交付，即尽最大努力的交付   
* 以太网的拓扑   
![此处输入图片的描述][5]  
* 集线器的特点    
![此处输入图片的描述][6]   
### 以太网帧格式   
MAC地址，物理地址 48位2进制 全球唯一   
适配器从网络上每收到一个MAC帧首先用硬件检查MAC帧中的MAC地址，如果是发往本站的则接收再进行其他处理，否则抛弃   
### 扩展以太网  
* 距离扩展 光纤   
* 集线器级联，使网络中计算机数量增加，但冲突域变大   
#### 优化以太网 
* 网桥（交换机前身） 过滤帧，指定接口转发 能够学习MAC地址表  避免冲突 全双工 
### 高速以太网  
100 BASE-T以太网



  [1]: https://github.com/xurui1995/computer-network/blob/master/pic/%E5%B8%A7.png
  [2]: https://github.com/xurui1995/computer-network/blob/master/pic/%E5%B0%81%E8%A3%85%E6%88%90%E5%B8%A7.png
  [3]: https://github.com/xurui1995/computer-network/blob/master/pic/PPP%E5%8D%8F%E8%AE%AE.png
  [4]: https://github.com/xurui1995/computer-network/blob/master/pic/%E5%85%B1%E4%BA%AB%E9%80%9A%E4%BF%A1%E5%AA%92%E4%BD%93.png
  [5]: https://github.com/xurui1995/computer-network/blob/master/pic/%E4%BB%A5%E5%A4%AA%E7%BD%91%E6%8B%93%E6%89%91.png
  [6]: https://github.com/xurui1995/computer-network/blob/master/pic/%E9%9B%86%E7%BA%BF%E5%99%A8%E7%89%B9%E7%82%B9.png